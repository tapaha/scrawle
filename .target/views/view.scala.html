@(issue_id: Integer)
@import org.tapaha.util._;

<!DOCTYPE html>
<html>
	<head>
		<title>SCrawle</title>
		<meta name="viewport" content="user-scalable=yes, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, width=device-width, height=device-height" />

		<link rel="stylesheet" media="screen" href="http://jquerymobile.com/demos/1.2.0/css/themes/default/jquery.mobile-1.2.0.css">
        <script src="@routes.Assets.at("javascripts/jquery-1.8.3.min.js")" type="text/javascript"></script>
		<script src="@routes.Assets.at("javascripts/jquery.mobile-1.2.0.min.js")" type="text/javascript"></script>

		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-36573141-1']);
		  _gaq.push(['_trackPageview']);
		
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
		<script>
			var imgProportion = function($targetWidth, $targetHeight) {
				var DeviceWidth	= parseInt($(window).width()) - 30; //핸드폰의 가로 사이즈를 구합니다.
					
				var a1 = DeviceWidth * $targetHeight; //이미지 세로사이즈 계산식
				var newHeight = (a1 / $targetWidth); //이미지 세로사이즈 계산식
				var rtnSize	= new Array((DeviceWidth), newHeight);  //리사이징 된 이미지 사이즈 리턴
				return rtnSize;
			}
			
			$(function() {
				$.getJSON(
				    "../view.json/@issue_id",
				    {},
				    function(data) {
				      console.log(data);
				      $("div#header h1").html(data.title);
				      $("div#content").html(data.content);
				    }
				);
				$("img").load(function() {
					var $this 		= $(this); //선택자를 지정합니다.
					var $thisWidth 	= parseInt($this.css("width")); //선택된 이미지의 가로사이즈를 구합니다.
					var $thisHeight	= parseInt($this.css("height")); //선택된 이미지의 세로사이즈를 구합니다.
					var clientWidth = parseInt($(window).width()); //핸드폰의 가로사이즈를 구합니다.
					
					if($thisWidth > clientWidth) //만약에 이미지 가로가 핸드폰 가로보다 길다면....
					{
						var rtn 		= imgProportion($thisWidth, $thisHeight); //Function 에 파라미터를 넘김니다
						var newWidth 	= rtn[0]; //Return 된 배열의 0번째 값을 읽어옵니다.
						var newHeight 	= rtn[1];  //Return 된 배열의 1번째 값을 읽어옵니다.
						alert("width : " + newWidth + " height : " + newHeight);
						$this.css({  //선택된 이미지에 CSS를 변경합니다.
							"width"  : newWidth,
							"height" : newHeight
						})
					}
					
				});
			});
		</script>
	</head>
	<body>
		<div data-role="page">
			<div data-role="header" id="header">
				<h1></h1>
			</div>
			<div data-role="content" id="content">
			</div>
			<div data-role="footer" data-theme="a" class="ui-bar">
				<a href="./changelog" data-role="button" data-icon="info" data-theme="c">Change Log</a>
				<a href="mailto:scrawle7 at gmail.com" data-role="button" data-icon="home" data-theme="c">Contact</a>
			</div>
		</div>
	</body>
</html>